{% extends "admin/base.html" %}

{% block container %}
  <h1>Tiket</h1>

  <p class="badge fs-6 bg-info">{{ tiket.jenis|upper }}</p>
  <p class="badge fs-6 bg-danger">Belum Selesai</p>

  <div class="table-responsive" x-data="{ show: true }">
    <table class="table table-striped table-sm">
      {% macro detail_row(key, value, extra_class="") %}
        <tr>
          <td class="{{ extra_class }}">{{ key }}</td>
          <td class="{{ extra_class }}">{{ value }}</td>
        </tr>
      {% endmacro %}
      {{ detail_row('Subjek', tiket.subjek, extra_class="fs-5 fw-bold") }}
      {{ detail_row('ID Tiket Publik', tiket.public_id) }}
      {{ detail_row('Nama Pengirim', tiket.nama_pengirim) }}
      {{ detail_row('No HP Pengirim', tiket.nohp_pengirim) }}
      {{ detail_row('Tanggal dibuat', tiket.tgl_dibuat) }}
    </table>
    <label class="form-label">
      Narasi:
      <button class="btn btn-sm btn-outline-secondary" @click="show = !show" x-text="show ? 'Sembunyikan' : 'Tampilkan'"></button>
    </label>
    <div class="border border-info rounded-2 p-3 font-monospace" x-show="show">{{ tiket.narasi }}</div>
  </div>

  <h2 class="mt-3">Balasan</h2>
  <div class="table-responsive">
    <table class="table table-striped table-sm">
      <tr>
        <th>Tanggal</th>
        <th>Isi balasan</th>
      </tr>
      {% for balasan in tiket.balasans %}
        <tr>
          <td>{{ balasan.tgl_dibuat }}</td>
          <td>{{ balasan.isi }}</td>
        </tr>
      {% endfor %}
    </table>
  </div>

  <h2>Aksi</h2>
  <form method="post">
    <label class="form-label">Tambah balasan baru</label>
    <div class="row">
      <div class="col-sm-11 mb-3">
        <textarea class="form-control" name="isiBalasan" rows="3"></textarea>
      </div>
      <div class="col">
        <button class="btn btn-lg btn-primary">Kirim</button>
      </div>
    </div>
  </form>

{% endblock %}
